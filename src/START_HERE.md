# üöÄ –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å!

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç **–í–∞—à–†–µ–º–æ–Ω—Ç** - –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

## ‚ö° –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?

**üî• PostgreSQL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!** –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –î–ª—è –∫–æ–≥–æ |
|------|----------|----------|
| **`POSTGRES_README.md`** | üëà **–ù–ê–ß–ù–ò–¢–ï –ó–î–ï–°–¨!** –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç | –í—Å–µ |
| `DATABASE_SETUP.md` | SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü | DevOps, Backend |
| `POSTGRES_INTEGRATION_GUIDE.md` | –ü–æ–ª–Ω–æ–µ API —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (52 endpoints) | Backend, Frontend |
| `USAGE_EXAMPLES.md` | –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –Ω–∞ TypeScript | Frontend |
| `MIGRATION_SUMMARY.md` | –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –¥–µ—Ç–∞–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ | Tech Lead |

### üì° API & Backend

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `BACKEND_README.md` | –û–±–∑–æ—Ä backend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã |
| `API_DOCUMENTATION.md` | –°—Ç–∞—Ä—ã–π KV-based API (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏) |
| `ARCHITECTURE.md` | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ |

### üíª Frontend

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `INTEGRATION_EXAMPLES.md` | –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| `QUICK_START.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ |

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

### –î–ª—è Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:

1. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ:** `POSTGRES_README.md` - 5 –º–∏–Ω—É—Ç
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã:** –°–ª–µ–¥—É–π—Ç–µ `DATABASE_SETUP.md`
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ `USAGE_EXAMPLES.md`
4. **–ò–∑—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª–∏:** `POSTGRES_INTEGRATION_GUIDE.md`

### –î–ª—è Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:

1. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ:** `POSTGRES_README.md` - —Ä–∞–∑–¥–µ–ª "React Hooks"
2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã:** `USAGE_EXAMPLES.md`
3. **–ù–∞—á–Ω–∏—Ç–µ –∫–æ–¥–∏—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ hooks:
   ```typescript
   import { useProjects } from './hooks/useProjects';
   import { useTasks } from './hooks/useTasks';
   import { useMaterials } from './hooks/useMaterials';
   ```

### –î–ª—è Tech Lead / –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞:

1. **–û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞:** `MIGRATION_SUMMARY.md`
2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** `ARCHITECTURE.md`
3. **–î–µ—Ç–∞–ª–∏ API:** `POSTGRES_INTEGRATION_GUIDE.md`

## üìä –ë—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

```
customers (–∑–∞–∫–∞–∑—á–∏–∫–∏)
    ‚Üì
  projects (–ø—Ä–æ–µ–∫—Ç—ã) ‚Üê foremen (–±—Ä–∏–≥–∞–¥–∏—Ä—ã)
    ‚Üì
  rooms (–∫–æ–º–Ω–∞—Ç—ã)
    ‚Üì
  tasks (–∑–∞–¥–∞—á–∏)
    ‚Üì
  ‚îú‚îÄ‚îÄ materials (–º–∞—Ç–µ—Ä–∏–∞–ª—ã)
  ‚îú‚îÄ‚îÄ media (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)
  ‚îî‚îÄ‚îÄ reports (–æ—Ç—á–µ—Ç—ã)

tickets (—Ç–∏–∫–µ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏)
```

**9 —Ç–∞–±–ª–∏—Ü, 52 API endpoints, –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

## üõ†Ô∏è –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (3 —à–∞–≥–∞)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ë–î

–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor:

```sql
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL –∏–∑ DATABASE_SETUP.md
```

### –®–∞–≥ 2: –û—Ç–∫–ª—é—á–∏—Ç–µ RLS (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```sql
ALTER TABLE customers DISABLE ROW LEVEL SECURITY;
ALTER TABLE foremen DISABLE ROW LEVEL SECURITY;
ALTER TABLE projects DISABLE ROW LEVEL SECURITY;
-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–¥–µ

```typescript
import { useProjects } from './hooks/useProjects';

function MyComponent() {
  const { projects, createProject } = useProjects(accessToken);
  // –ì–æ—Ç–æ–≤–æ! üéâ
}
```

## üîë –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### User Types
- **Customer** (–∑–∞–∫–∞–∑—á–∏–∫) - –≤–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–µ–∫—Ç–æ–≤
- **Foreman** (–±—Ä–∏–≥–∞–¥–∏—Ä) - –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–æ–≤

### Workflow
```
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí creates customer/foreman record
2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí requires customer + foreman
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç ‚Üí belongs to project
4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á ‚Üí belongs to room
5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤/–º–µ–¥–∏–∞ ‚Üí belongs to task
```

### Access Control
- Customer –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –°–í–û–ò –ø—Ä–æ–µ–∫—Ç—ã
- Foreman –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç—ã, –≥–¥–µ –û–ù –Ω–∞–∑–Ω–∞—á–µ–Ω
- API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ

## üé® React Hooks (–≥–æ—Ç–æ–≤—ã–µ!)

```typescript
// Projects
const { projects, createProject, updateProject, deleteProject } = 
  useProjects(accessToken);

// Rooms  
const { rooms, fetchRooms, createRoom, updateRoom, deleteRoom } = 
  useRooms(accessToken);

// Tasks
const { tasks, fetchTasks, createTask, updateTask, deleteTask } = 
  useTasks(accessToken);

// Materials
const { materials, fetchMaterials, createMaterial, deleteMaterial } = 
  useMaterials(accessToken);

// Tickets
const { tickets, createTicket, updateTicket, deleteTicket } = 
  useTickets(accessToken);
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ database.ts          # ‚Üê TypeScript —Ç–∏–ø—ã –¥–ª—è –ë–î
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useProjects.ts       # ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ useRooms.ts          # ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ useTasks.ts          # ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ useMaterials.ts      # ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ useTickets.ts        # ‚Üê –°–∏—Å—Ç–µ–º–∞ —Ç–∏–∫–µ—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ supabase/functions/server/
‚îÇ   ‚îî‚îÄ‚îÄ index.tsx            # ‚Üê Backend API (52 endpoints)
‚îÇ
‚îî‚îÄ‚îÄ pages/                   # React —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    ‚îú‚îÄ‚îÄ Home.tsx
    ‚îú‚îÄ‚îÄ About.tsx
    ‚îî‚îÄ‚îÄ demo/
        ‚îú‚îÄ‚îÄ DemoClient.tsx
        ‚îî‚îÄ‚îÄ DemoBrigade.tsx
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª `POSTGRES_README.md`
- [ ] –°–æ–∑–¥–∞–ª —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase
- [ ] –û—Ç–∫–ª—é—á–∏–ª RLS (–¥–ª—è dev)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- [ ] –°–æ–∑–¥–∞–ª —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
- [ ] –ò–∑—É—á–∏–ª React hooks
- [ ] –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

### "table does not exist"
‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ `DATABASE_SETUP.md`

### "permission denied"
‚Üí –û—Ç–∫–ª—é—á–∏—Ç–µ RLS –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ policies

### "Unauthorized"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ accessToken

### –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Edge Functions

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏:**
- [PostgreSQL Quick Start](./POSTGRES_README.md)
- [Database Setup](./DATABASE_SETUP.md)  
- [Code Examples](./USAGE_EXAMPLES.md)
- [Full API Guide](./POSTGRES_INTEGRATION_GUIDE.md)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Supabase:**
- [Auth](https://supabase.com/docs/guides/auth)
- [Database](https://supabase.com/docs/guides/database)
- [Edge Functions](https://supabase.com/docs/guides/functions)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–í–µ—Ä—Å–∏—è:** 1.0 (PostgreSQL)  
**–î–∞—Ç–∞:** 8 —Ñ–µ–≤—Ä–∞–ª—è 2025

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üéâ**

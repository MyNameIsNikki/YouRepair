# Backend API –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã "–í–∞—à–†–µ–º–æ–Ω—Ç"

## üìã –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π backend API –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–º–æ–Ω—Ç–∞–º–∏ "–í–∞—à–†–µ–º–æ–Ω—Ç", –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –±–∞–∑–µ Supabase Edge Functions —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Hono web framework.

**üî• –ù–û–í–ò–ù–ö–ê:** –¢–µ–ø–µ—Ä—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PostgreSQL!

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Frontend (React) ‚Üí API Server (Hono) ‚Üí PostgreSQL Database + Supabase Storage
```

- **Frontend**: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ hooks –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API
- **Backend**: Hono web server –Ω–∞ Supabase Edge Functions
- **Database**: PostgreSQL (9 —Ç–∞–±–ª–∏—Ü) + KV Store –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞
- **Storage**: Supabase Storage –¥–ª—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
- **Auth**: Supabase Auth –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üéØ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### PostgreSQL Tables (9)
- `customers` - –ó–∞–∫–∞–∑—á–∏–∫–∏
- `foremen` - –ë—Ä–∏–≥–∞–¥–∏—Ä—ã
- `projects` - –ü—Ä–æ–µ–∫—Ç—ã
- `rooms` - –ö–æ–º–Ω–∞—Ç—ã
- `tasks` - –ó–∞–¥–∞—á–∏
- `materials` - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
- `media` - –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
- `reports` - –û—Ç—á–µ—Ç—ã
- `tickets` - –¢–∏–∫–µ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### KV Store
- User mapping (auth ‚Üî database)
- Demo requests (lead capture)

**üìñ –°–º. `/POSTGRES_README.md` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ —Å PostgreSQL**

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend (Server)

```
/supabase/functions/server/
‚îú‚îÄ‚îÄ index.tsx          # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª API —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ –≤—Å–µ–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
‚îî‚îÄ‚îÄ kv_store.tsx       # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å KV —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (–∑–∞—â–∏—â–µ–Ω)
```

### Frontend (API Integration)

```
/utils/
‚îú‚îÄ‚îÄ api.ts                    # API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ supabase/
    ‚îú‚îÄ‚îÄ client.ts            # Supabase –∫–ª–∏–µ–Ω—Ç –∏ auth helpers
    ‚îî‚îÄ‚îÄ info.tsx             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase (–∑–∞—â–∏—â–µ–Ω)

/hooks/
‚îú‚îÄ‚îÄ useAuth.ts               # Hook –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ useApartments.ts         # Hook –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–≤–∞—Ä—Ç–∏—Ä–∞–º–∏
‚îú‚îÄ‚îÄ useTasks.ts              # Hook –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
‚îî‚îÄ‚îÄ useTickets.ts            # Hook –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Ç–∏–∫–µ—Ç–æ–≤

/components/
‚îú‚îÄ‚îÄ DemoRequestForm.tsx      # –§–æ—Ä–º–∞ –∑–∞—Ö–≤–∞—Ç–∞ –ª–∏–¥–æ–≤ —Å –ª–µ–Ω–¥–∏–Ω–≥–∞
‚îî‚îÄ‚îÄ AuthModal.tsx            # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```
/API_DOCUMENTATION.md        # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
/INTEGRATION_EXAMPLES.md     # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
/BACKEND_README.md          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /signup` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /profile` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /profile` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### –ó–∞—è–≤–∫–∏ –Ω–∞ –¥–µ–º–æ (Lead Capture)
- `POST /demo-requests` - –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –¥–µ–º–æ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `GET /demo-requests` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### –ö–≤–∞—Ä—Ç–∏—Ä—ã
- `GET /apartments` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /apartments/:id` - –ü–æ–ª—É—á–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –ø–æ ID
- `POST /apartments` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É
- `PUT /apartments/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É
- `DELETE /apartments/:id` - –£–¥–∞–ª–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É

### –ö–æ–º–Ω–∞—Ç—ã
- `GET /apartments/:apartmentId/rooms` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–Ω–∞—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã
- `GET /rooms/:id` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É –ø–æ ID
- `POST /apartments/:apartmentId/rooms` - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `PUT /rooms/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `DELETE /rooms/:id` - –£–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É

### –ó–∞–¥–∞—á–∏
- `GET /rooms/:roomId/tasks` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –∫–æ–º–Ω–∞—Ç—ã
- `GET /tasks/:id` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
- `POST /rooms/:roomId/tasks` - –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- `PUT /tasks/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É (–≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ç—É—Å)
- `DELETE /tasks/:id` - –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É

### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
- `GET /tasks/:taskId/materials` - –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∑–∞–¥–∞—á–∏
- `POST /tasks/:taskId/materials` - –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
- `PUT /materials/:id` - –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
- `DELETE /materials/:id` - –£–¥–∞–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª

### –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
- `GET /tasks/:taskId/media` - –ü–æ–ª—É—á–∏—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã (—Å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏ URL)
- `POST /tasks/:taskId/media/upload` - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (FormData)
- `DELETE /media/:id` - –£–¥–∞–ª–∏—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª

### –¢–∏–∫–µ—Ç—ã (–ü–æ–¥–¥–µ—Ä–∂–∫–∞)
- `GET /tickets` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–∏–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /tickets/:id` - –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–∫–µ—Ç –ø–æ ID
- `POST /tickets` - –°–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç
- `PUT /tickets/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–∫–µ—Ç
- `POST /tickets/:id/messages` - –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫ —Ç–∏–∫–µ—Ç—É

### –°–ª—É–∂–µ–±–Ω—ã–µ
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API

## üîß –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API —Ñ—É–Ω–∫—Ü–∏–π

```typescript
import { apartmentAPI, taskAPI, mediaAPI } from './utils/api';

// –°–æ–∑–¥–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É
const { apartment } = await apartmentAPI.create({
  name: '–ö–≤–∞—Ä—Ç–∏—Ä–∞ ‚Ññ47',
  address: '—É–ª. –°—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, –¥. 12',
  totalArea: 85
});

// –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
const { task } = await taskAPI.create(roomId, {
  name: '–£–∫–ª–∞–¥–∫–∞ –ª–∞–º–∏–Ω–∞—Ç–∞',
  status: 'pending'
});

// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
const { media } = await mediaAPI.upload(taskId, file, 'photo');
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ React Hooks

```typescript
import { useAuth, useApartments, useTasks } from './hooks';

function MyComponent() {
  const { user, login, logout } = useAuth();
  const { apartments, createApartment } = useApartments();
  const { tasks, updateTaskStatus } = useTasks(roomId);

  // –í–∞—à –∫–æ–¥...
}
```

### 3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```typescript
import { signIn, signOut } from './utils/supabase/client';

// –í—Ö–æ–¥
await signIn('user@example.com', 'password');

// –í—ã—Ö–æ–¥
await signOut();
```

### 4. –§–æ—Ä–º–∞ –∑–∞—Ö–≤–∞—Ç–∞ –ª–∏–¥–æ–≤

```tsx
import { DemoRequestForm } from './components/DemoRequestForm';

<DemoRequestForm onSuccess={() => console.log('Submitted!')} />
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security
- –ö–∞–∂–¥—ã–π —Ä–µ—Å—É—Ä—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `userId` –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- Unauthorized –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 401
- Forbidden –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 403

### Storage Security
- –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º bucket
- –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ URL (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 1 —á–∞—Å)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤: `{userId}/{taskId}/{filename}`
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 50 –ú–ë

### Auth Security
- `SUPABASE_SERVICE_ROLE_KEY` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- Access tokens –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- Email –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è (email-—Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### KV Store Keys

```
profile:{userId}              # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
demo_request:{requestId}      # –ó–∞—è–≤–∫–∞ –Ω–∞ –¥–µ–º–æ
demo_requests_index           # –ú–∞—Å—Å–∏–≤ ID –∑–∞—è–≤–æ–∫
user_apartments:{userId}      # –ú–∞—Å—Å–∏–≤ ID –∫–≤–∞—Ä—Ç–∏—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
apartment:{apartmentId}       # –î–∞–Ω–Ω—ã–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã
room:{roomId}                 # –î–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
task:{taskId}                 # –î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
material:{materialId}         # –î–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
media:{mediaId}               # –î–∞–Ω–Ω—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞
user_tickets:{userId}         # –ú–∞—Å—Å–∏–≤ ID —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
ticket:{ticketId}             # –î–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç–∞
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è –¥–∞–Ω–Ω—ã—Ö

```
User
‚îî‚îÄ‚îÄ Apartments
    ‚îî‚îÄ‚îÄ Rooms
        ‚îî‚îÄ‚îÄ Tasks
            ‚îú‚îÄ‚îÄ Materials
            ‚îî‚îÄ‚îÄ Media

User
‚îî‚îÄ‚îÄ Tickets
    ‚îî‚îÄ‚îÄ Messages
```

## üìù –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `/utils/api.ts`:

- `User`, `UserProfile`
- `Apartment`, `CreateApartmentData`
- `Room`, `CreateRoomData`
- `Task`, `CreateTaskData`
- `Material`, `CreateMaterialData`
- `Media`
- `Ticket`, `CreateTicketData`, `TicketMessage`
- `DemoRequestData`

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–º–æ–Ω—Ç–∞

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É
const { apartment } = await apartmentAPI.create({
  name: '–ö–≤–∞—Ä—Ç–∏—Ä–∞ ‚Ññ47',
  address: '—É–ª. –°—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, –¥. 12',
  totalArea: 85
});

// 2. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
const { room } = await roomAPI.create(apartment.id, {
  name: '–ì–æ—Å—Ç–∏–Ω–∞—è',
  area: 25
});

// 3. –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
const { task } = await taskAPI.create(room.id, {
  name: '–£–∫–ª–∞–¥–∫–∞ –ª–∞–º–∏–Ω–∞—Ç–∞',
  status: 'pending'
});

// 4. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
await materialAPI.create(task.id, {
  name: '–õ–∞–º–∏–Ω–∞—Ç 33 –∫–ª–∞—Å—Å',
  quantity: '27 –∫–≤.–º',
  price: 45900
});

// 5. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
await taskAPI.update(task.id, { status: 'completed' });
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ —Å –ª–µ–Ω–¥–∏–Ω–≥–∞

```typescript
await demoRequestAPI.create({
  name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
  email: 'ivan@example.com',
  phone: '+7 999 123-45-67',
  userType: 'client',
  message: '–•–æ—á—É –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–µ–º–æ'
});
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

```typescript
const { ticket } = await ticketAPI.create({
  subject: '–ü—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ',
  message: '–ù–µ –º–æ–≥—É –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏',
  priority: 'medium'
});

await ticketAPI.addMessage(ticket.id, '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è');
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API

```typescript
import { healthAPI } from './utils/api';

const { status, timestamp } = await healthAPI.check();
console.log('API Status:', status); // "ok"
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ `console.error` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º. –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Supabase Dashboard ‚Üí Edge Functions ‚Üí Logs.

### –û–±—â–∏–µ –æ—à–∏–±–∫–∏

1. **401 Unauthorized** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
   - –†–µ—à–µ–Ω–∏–µ: –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ `signIn()` –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å access token

2. **403 Forbidden** - –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å—É
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Ä–µ—Å—É—Ä—Å–∞

3. **404 Not Found** - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID —Ä–µ—Å—É—Ä—Å–∞

4. **500 Internal Server Error** - –û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ Supabase Dashboard

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- **[INTEGRATION_EXAMPLES.md](./INTEGRATION_EXAMPLES.md)** - 17 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [Supabase Auth](https://supabase.com/docs/guides/auth) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [Supabase Storage](https://supabase.com/docs/guides/storage) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ö—Ä–∞–Ω–∏–ª–∏—â—É —Ñ–∞–π–ª–æ–≤
- [Hono Framework](https://hono.dev/) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è web framework

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –í–∞–∂–Ω–æ
- KV Store —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ DDL statements –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞
- KV Store –≥–∏–±–∫–∞—è –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

1. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç –≤ `/supabase/functions/server/index.tsx`
2. –î–æ–±–∞–≤–∏—Ç—å API —Ñ—É–Ω–∫—Ü–∏—é –≤ `/utils/api.ts`
3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ–∑–¥–∞—Ç—å hook –≤ `/hooks/`
4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `kv.mget()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ React hooks –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. **Lazy loading** - –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
4. **Debounce** - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ debounce –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
5. **Signed URLs** - –û–±–Ω–æ–≤–ª—è–π—Ç–µ URL –º–µ–¥–∏–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Å—Ä–æ–∫ 1 —á–∞—Å)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –±–∞–≥–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: [API_DOCUMENTATION.md](./API_DOCUMENTATION.md)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã: [INTEGRATION_EXAMPLES.md](./INTEGRATION_EXAMPLES.md)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –∫–æ–¥ —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã "–í–∞—à–†–µ–º–æ–Ω—Ç" –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 7 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é